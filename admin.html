<!DOCTYPE html><html lang="tr"><head>
<meta charset="UTF-8"><title>UHKB | Admin</title>
<link rel="stylesheet" href="style.css"></head><body>
<header><img src="logo.png"><div class="hacker-title">ADMIN OPERASYON MERKEZI</div></header>
<div class="container">
<div class="grid" id="list"></div>
</div>
<script type="module">
import { auth, db, api } from './firebase.js';
const { onAuthStateChanged, ref, onValue, update }=api;
onAuthStateChanged(auth,u=>{ if(!u) location.href='login.html'; });
onValue(ref(db,'bizimleCalis'),snap=>{
  list.innerHTML='';
  Object.entries(snap.val()||{}).forEach(([id,x])=>{
    list.innerHTML+=`<div class="card ${x.risk}">
    <b>${x.adsoyad}</b><br>${x.email}<br>${x.beceri}<br>
    <select onchange="setRisk('${id}',this.value)">
      <option value="low">Dusuk</option>
      <option value="mid">Orta</option>
      <option value="high">Yuksek</option>
    </select>
    <button onclick="assign('${id}')">Gorev Ata</button>
    </div>`;
  });
});
window.setRisk=(id,v)=>update(ref(db,'bizimleCalis/'+id),{risk:v});
window.assign=id=>{ const g=prompt('Gorev'); if(g) update(ref(db,'bizimleCalis/'+id),{gorev:g}); };
</script></body></html>
